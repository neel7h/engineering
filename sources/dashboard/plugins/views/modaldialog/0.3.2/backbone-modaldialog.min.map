{"version":3,"file":"backbone-modaldialog.min.js","sources":["backbone-modaldialog.js"],"names":["Backbone","ModalView","View","extend","name","modalBlanket","modalContainer","defaultOptions","fadeInDuration","fadeOutDuration","showCloseButton","bodyOverflowHidden","setFocusOnFirstFormControl","targetContainer","document","body","slideFromAbove","slideFromBelow","slideDistance","closeImageUrl","closeImageHoverUrl","showModalAtScrollPosition","permanentlyVisible","backgroundClickClosesModal","pressingEscapeClosesModal","css","border","border-color","background-color","-webkit-box-shadow","-moz-box-shadow","box-shadow","-webkit-border-radius","-moz-border-radius","border-radius","initialize","events","showModalBlanket","this","ensureModalBlanket","fadeIn","options","hideModalBlanket","fadeOut","ensureModalContainer","target","remove","$","z-index","position","appendTo","length","top","left","height","width","opacity","backgroundColor","hide","keyup","event","keyCode","hideModal","click","id","controls","el","focus","trigger","unbind","originalBodyOverflowValue","container","getCoordinate","coordinate","value","recenter","$el","offsets","right","bottom","isEmpty","getOffsets","centreY","window","centreX","positionY","outerHeight","y","positionX","outerWidth","x","offsetY","offsetX","scrollTop","scrollLeft","showModal","empty","addClass","coords","_","bind","append","view","background","background-size","text-decoration","hover","preventDefault","that","autocenter","resize","on","off","animateProperties","modalOffset","offset","animate"],"mappings":"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","sourcesContent":["//Backbone.ModalDialog.js v0.3.2\n\n//Copyright (C)2012 Gareth Elms\n//Distributed under MIT License\n\n//Documentation and full license availabe at:\n//https://github.com/GarethElms/BackboneJSModalView\n\nBackbone.ModalView = Backbone.View.extend({\n\tname : \"ModalView\",\n\tmodalBlanket : null,\n\tmodalContainer : null,\n\tdefaultOptions : {\n\t\tfadeInDuration : 150,\n\t\tfadeOutDuration : 150,\n\t\tshowCloseButton : true,\n\t\tbodyOverflowHidden : false,\n\t\tsetFocusOnFirstFormControl : true,\n\t\ttargetContainer : document.body,\n\t\tslideFromAbove : false,\n\t\tslideFromBelow : false,\n\t\tslideDistance : 150,\n\t\tcloseImageUrl : \"resources/images/popup_close.png\",\n\t\tcloseImageHoverUrl : \"resources/images/popup_close.png\",\n\t\tshowModalAtScrollPosition : true,\n\t\tpermanentlyVisible : false,\n\t\tbackgroundClickClosesModal : true,\n\t\tpressingEscapeClosesModal : true,\n\t\tcss : {\n\t\t\t'border': '1px solid',\n\t\t\t'border-color': '#7a7a7A #000 #000',\n\t\t\t\"background-color\" : \"#fff\",\n\t\t\t\"-webkit-box-shadow\" : \"0px 0px 15px 4px rgba(0, 0, 0, 0.5)\",\n\t\t\t\"-moz-box-shadow\" : \"0px 0px 15px 4px rgba(0, 0, 0, 0.5)\",\n\t\t\t\"box-shadow\" : \"0px 0px 15px 4px rgba(0, 0, 0, 0.5)\",\n\t\t\t\"-webkit-border-radius\" : \"10px\",\n\t\t\t\"-moz-border-radius\" : \"10px\",\n\t\t\t\"border-radius\" : \"10px\"\n\t\t}\n\t},\n\n\tinitialize : function() {\n\t},\n\tevents : {},\n\n\tshowModalBlanket : function() {\n\t\treturn this.ensureModalBlanket().fadeIn(\n\t\t\t\tthis.options.fadeInDuration);\n\t},\n\n\thideModalBlanket : function() {\n\t\treturn this.modalBlanket.fadeOut(this.options.fadeOutDuration);\n\t},\n\n\tensureModalContainer : function(target) {\n\t\tif (target != null) {\n\t\t\t// A target is passed in, we need to re-render the modal container into the target.\n\t\t\tif (this.modalContainer != null) {\n\t\t\t\tthis.modalContainer.remove();\n\t\t\t\tthis.modalContainer = null;\n\t\t\t}\n\t\t}\n\n\t\tif (this.modalContainer == null) {\n\t\t\tthis.modalContainer = $(\"<div id='modalContainer'>\").css({\n\t\t\t\t\"z-index\" : \"99999\",\n\t\t\t\t\"position\" : \"relative\",\n\t\t\t\t\"-webkit-border-radius\" : \"6px\",\n\t\t\t\t\"-moz-border-radius\" : \"6px\",\n\t\t\t\t\"border-radius\" : \"6px\"\n\t\t\t}).appendTo(target);\n\t\t}\n\n\t\treturn this.modalContainer;\n\t},\n\n\tensureModalBlanket : function() {\n\t\tthis.modalBlanket = $(\"#modal-blanket\");\n\n\t\tif (this.modalBlanket.length == 0) {\n\t\t\tthis.modalBlanket = $(\"<div id='modal-blanket'>\").css({\n\t\t\t\tposition : \"absolute\",\n\t\t\t\ttop : 0,\n\t\t\t\tleft : 0,\n\t\t\t\theight : $(document).height(), // Span the full document height...\n\t\t\t\twidth : \"100%\", // ...and full width\n\t\t\t\topacity : 0.5, // Make it slightly transparent\n\t\t\t\tbackgroundColor : \"#000\",\n\t\t\t\t\"z-index\" : 99900\n\t\t\t}).appendTo(document.body).hide();\n\t\t} else {\n\t\t\t// Ensure the blanket spans the whole document, screen may have been updated.\n\t\t\tthis.modalBlanket.css({\n\t\t\t\theight : $(document).height(), // Span the full document height...\n\t\t\t\twidth : \"100%\" // ...and full width\n\t\t\t});\n\t\t}\n\n\t\treturn this.modalBlanket;\n\t},\n\n\tkeyup : function(event) {\n\t\tif (event.keyCode == 27 && this.options.pressingEscapeClosesModal) {\n\t\t\tthis.hideModal();\n\t\t}\n\t},\n\n\tclick : function(event) {\n\t\tif (event.target.id == \"modal-blanket\" && this.options.backgroundClickClosesModal) {\n\t\t\tthis.hideModal();\n\t\t}\n\t},\n\n\tsetFocusOnFirstFormControl : function() {\n\t\tvar controls = $(\"input, select, email, url, number, range, date, month, week, time, datetime, datetime-local, search, color\", $(this.el));\n\t\tif (controls.length > 0) {\n\t\t\t$(controls[0]).focus();\n\t\t}\n\t},\n\n\thideModal : function() {\n\t\tthis.trigger(\"closeModalWindow\");\n\n\t\tthis.hideModalBlanket();\n\t\t$(document.body).unbind(\"keyup\", this.keyup);\n\t\tthis.modalBlanket.unbind(\"click\", this.click);\n\n\t\tif (this.options.bodyOverflowHidden === true) {\n\t\t\t$(document.body).css(\"overflow\", this.originalBodyOverflowValue);\n\t\t}\n\n\t\tvar container = this.modalContainer;\n\t\t$(this.modalContainer).fadeOut(this.options.fadeOutDuration, function() {\n\t\t\tcontainer.remove();\n\t\t});\n\t},\n\n\tgetCoordinate : function(coordinate, css) {\n\t\tif (typeof (css[coordinate]) !== \"undefined\") {\n\t\t\tvar value = css[coordinate];\n\t\t\tdelete css[coordinate]; // Don't apply positioning to the $el, we apply it to the modal container. Remove it from options.css\n\n\t\t\treturn value;\n\t\t}\n\t},\n\n\t// Re-centre the modal dialog after it has been displayed. Useful if the height changes after initial rendering eg; jquery ui tabs will hide tab sections\n\trecenter : function() {\n\t\tvar $el = $(this.el);\n\t\tvar coords = {\n\t\t\ttop : this.getCoordinate(\"top\", this.options.css),\n\t\t\tleft : this.getCoordinate(\"left\", this.options.css),\n\t\t\tright : this.getCoordinate(\"right\", this.options.css),\n\t\t\tbottom : this.getCoordinate(\"bottom\", this.options.css),\n\t\t\tisEmpty : function() {\n\t\t\t\treturn (this.top == null && this.left == null && this.right == null && this.bottom == null);\n\t\t\t}\n\t\t};\n\n\t\tvar offsets = this.getOffsets();\n\t\tvar centreY = $(window).height() / 2;\n\t\tvar centreX = $(window).width() / 2;\n\t\tvar modalContainer = this.modalContainer;\n\t\tvar positionY = centreY - ($el.outerHeight() / 2);\n\t\tmodalContainer.css({\n\t\t\t\"top\" : (positionY + offsets.y) + \"px\"\n\t\t});\n\n\t\tvar positionX = centreX - ($el.outerWidth() / 2);\n\t\tmodalContainer.css({\n\t\t\t\"left\" : (positionX + offsets.x) + \"px\"\n\t\t});\n\n\t\treturn this;\n\t},\n\n\tgetOffsets : function() {\n\t\tvar offsetY = 0, offsetX = 0;\n\t\tif (this.options.showModalAtScrollPosition) {\n\t\t\toffsetY = $(document).scrollTop();\n\t\t\toffsetX = $(document).scrollLeft();\n\t\t}\n\n\t\treturn {\n\t\t\tx : offsetX,\n\t\t\ty : offsetY\n\t\t};\n\t},\n\n\tshowModal : function(options) {\n\t\tthis.defaultOptions.targetContainer = document.body;\n\t\tthis.options = $.extend(true, {}, this.defaultOptions, options, this.options);\n\n\t\tif (this.options.permanentlyVisible) {\n\t\t\tthis.options.showCloseButton = false;\n\t\t\tthis.options.backgroundClickClosesModal = false;\n\t\t\tthis.options.pressingEscapeClosesModal = false;\n\t\t}\n\n\t\t//Set the center alignment padding + border see css style\n\t\tvar $el = $(this.el);\n\n\t\tvar centreY = $(window).height() / 2;\n\t\tvar centreX = $(window).width() / 2;\n\t\tvar modalContainer = this.ensureModalContainer(this.options.targetContainer).empty();\n\n\t\t$el.addClass(\"modal\");\n\n\t\tvar coords = {\n\t\t\ttop : this.getCoordinate(\"top\", this.options.css),\n\t\t\tleft : this.getCoordinate(\"left\", this.options.css),\n\t\t\tright : this.getCoordinate(\"right\", this.options.css),\n\t\t\tbottom : this.getCoordinate(\"bottom\", this.options.css),\n\t\t\tisEmpty : function() {\n\t\t\t\treturn (this.top == null && this.left == null && this.right == null && this.bottom == null);\n\t\t\t}\n\t\t};\n\n\t\t$el.css(this.options.css);\n\n\t\tthis.showModalBlanket();\n\t\tthis.keyup = _.bind(this.keyup, this);\n\t\tthis.click = _.bind(this.click, this);\n\t\t$(document.body).keyup(this.keyup); // This handler is unbound in hideModal()\n\t\tthis.modalBlanket.click(this.click); // This handler is unbound in hideModal()\n\n\t\tif (this.options.bodyOverflowHidden === true) {\n\t\t\tthis.originalBodyOverflowValue = $(document.body).css(\"overflow\");\n\t\t\t$(document.body).css(\"overflow\", \"hidden\");\n\t\t}\n\n\t\tmodalContainer.append($el);\n\n\t\tmodalContainer.css({\n\t\t\t\"opacity\" : 0,\n\t\t\t\"position\" : \"absolute\",\n\t\t\t\"z-index\" : 999999\n\t\t});\n\n\t\tvar offsets = this.getOffsets();\n\n\t\t// Only apply default centre coordinates if no css positions have been supplied\n\t\tif (coords.isEmpty()) {\n\t\t\tvar positionY = centreY - ($el.outerHeight() / 2);\n\t\t\tif (positionY < 10)\n\t\t\t\tpositionY = 10;\n\n\t\t\t// Overriding the coordinates with explicit values if they are passed in\n\t\t\tif (typeof (this.options.y) !== \"undefined\") {\n\t\t\t\tpositionY = this.options.y;\n\t\t\t} else {\n\t\t\t\tpositionY += offsets.y;\n\t\t\t}\n\n\t\t\tmodalContainer.css({\n\t\t\t\t\"top\" : positionY + \"px\"\n\t\t\t});\n\n\t\t\tvar positionX = centreX - ($el.outerWidth() / 2);\n\t\t\t// Overriding the coordinates with explicit values if they are passed in\n\t\t\tif (typeof (this.options.x) !== \"undefined\") {\n\t\t\t\tpositionX = this.options.x;\n\t\t\t} else {\n\t\t\t\tpositionX += offsets.x;\n\t\t\t}\n\n\t\t\tmodalContainer.css({\n\t\t\t\t\"left\" : positionX + \"px\"\n\t\t\t});\n\t\t} else {\n\t\t\tif (coords.top != null)\n\t\t\t\tmodalContainer.css({\n\t\t\t\t\t\"top\" : coords.top + offsets.y\n\t\t\t\t});\n\t\t\tif (coords.left != null)\n\t\t\t\tmodalContainer.css({\n\t\t\t\t\t\"left\" : coords.left + offsets.x\n\t\t\t\t});\n\t\t\tif (coords.right != null)\n\t\t\t\tmodalContainer.css({\n\t\t\t\t\t\"right\" : coords.right\n\t\t\t\t});\n\t\t\tif (coords.bottom != null)\n\t\t\t\tmodalContainer.css({\n\t\t\t\t\t\"bottom\" : coords.bottom\n\t\t\t\t});\n\t\t}\n\n\t\tif (this.options.setFocusOnFirstFormControl) {\n\t\t\tthis.setFocusOnFirstFormControl();\n\t\t}\n\n\t\tif (this.options.showCloseButton) {\n\t\t\tvar view = this;\n\t\t\tvar image = $(\"<a href='#' id='modalCloseButton'>&#160;</a>\")\n\t\t\t\t.css({\n\t\t\t\t\t\"position\" : \"absolute\",\n\t\t\t\t\t\"top\" : \"-25px\",\n\t\t\t\t\t\"right\" : \"-25px\",\n\t\t\t\t\t\"width\" : \"52px\",\n\t\t\t\t\t\"height\" : \"52px\",\n\t\t\t\t\t\"background\" : \"transparent url(\"+ view.options.closeImageUrl+ \") top left no-repeat\",\n\t\t\t\t\t\"background-size\" : \"52px 52px\",\n\t\t\t\t\t\"text-decoration\" : \"none\"\n\t\t\t\t})\n\t\t\t\t.appendTo(this.modalContainer)\n\t\t\t\t.hover(\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\t$(this).css(\"background-image\",\"url(\"+ view.options.closeImageHoverUrl+ \") !important\");\n\t\t\t\t\t},\n\t\t\t\t\tfunction() {\n\t\t\t\t\t\t$(this).css(\"background-image\",\"url(\"+ view.options.closeImageUrl+ \") !important\");\n\t\t\t\t\t}\n\t\t\t\t).click(function(event) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tview.hideModal();\n\t\t\t\t});\n\t\t}\n\t\t\n\t\t\n\t\t{\n\t\t\tvar that = this;\n\t\t\tvar autocenter = function() {\n\t\t\t\tthat.recenter();\n\t\t\t};\n\t\t\t$(window).resize(autocenter);\n\t\t\t$el.on('remove',function(){ \n\t\t\t\t$(window).off('resize',autocenter);\n\t\t\t});\n\t\t}\n\n\t\tvar animateProperties = {\n\t\t\topacity : 1\n\t\t};\n\t\tvar modalOffset = modalContainer.offset();\n\n\t\tif (this.options.slideFromAbove) {\n\t\t\tmodalContainer.css({\n\t\t\t\t\"top\" : (modalOffset.top - this.options.slideDistance) + \"px\"\n\t\t\t});\n\t\t\tanimateProperties.top = coords.top;\n\t\t}\n\n\t\tif (this.options.slideFromBelow) {\n\t\t\tmodalContainer.css({\n\t\t\t\t\"top\" : (modalOffset.top + this.options.slideDistance) + \"px\"\n\t\t\t});\n\t\t\tanimateProperties.top = coords.top;\n\t\t}\n\n\t\tthis.modalContainer.animate(animateProperties, this.options.fadeInDuration);\n\n\t\treturn this;\n\t}\n});"]}