/*! cast-bootstrap 22-01-2019 */
(function(){var a,b,c,d,e,f,g;a=function(a,b,c,d,e){return c.View.extend({tagName:"div",className:"drop-down",template:d.compile('<div class="selector"> <span class="label">{{{text}}}</span> <a onfocus="this.blur();"></a> </div> <div class="cont"> <ul class="options"> {{#each items}} <li class="selectable {{#if separator}}separator{{else}}no-separator{{/if}}" data-ref="{{reference}}" data-href="{{href}}" {{#if title}}title="{{title}}"{{/if}}><div class="label {{class}}">{{{text}}}</div></li> {{/each}} </ul></div>'),events:function(){return e.isIpad()?{"touchend .selector":"_toggleMenu","touchend .options .selectable":"selectItem","touchmove .options .selectable":"scroll","touchstart .options .selectable":"prepareItemSelection"}:{"click .selector":"_toggleMenu","click .options .selectable":"selectItem"}}(),initialize:function(c){var d,e,g,h,i,j;for(this.options=this.options||c,f.addItem(this),e=0,i=this.options.items,g=0,h=i.length;g<h;g++)j=i[g],j.reference=e++;return d=a(window),d.on("resize",b.debounce(function(a){return function(){return a._resize()}}(this),100)),d.on("click",this,this._toggleMenuThenPropagate)},remove:function(){return a(window).off("resize",this._resize).off("click touchend",this._toggleMenuThenPropagate),f.removeItem(this)},_resize:function(){var b,c,d,e,f;if(null==this.$cont&&(this.$cont=this.$el.find(".cont")),this.$el.hasClass("opened")?this.$el.find(".tooltiptext").hide():this.$el.find(".tooltiptext").show(),this.options.alignRight&&(e=this.$el.find(".selector"),this.$cont.outerWidth(),e.outerWidth()),this.$el.hasClass("opened"))return f=a(window).height()-(this.$cont.offset().top-a(document).scrollTop())-this.$cont.height()-20,c=this.$cont.find(".options").height(),f<0?(d=this.$cont.height()+f,this.$cont.height(d)):this.$cont.height()<this.$cont.css("max-height").replace("px","")&&(d=Math.min(c,this.$cont.height()+f),this.$cont.height(d)),"function"==typeof(b=this.$el.find(".cont")).scroller?b.scroller("computeSize",{height:d||this.$cont.height(),scrollableAreaHeight:c}):void 0},onShow:function(){return this._resize()},render:function(){var a,b;return this.$cont=void 0,null!=this.options.class&&this.$el.addClass(this.options.class),b=this.$el.html(this.template(this.options)),a=this.$el.find(".cont"),"function"==typeof a.scrollerInit&&a.scrollerInit({scrollId:"detail"+this.options.name,horizontalPane:!1,scrollableArea:this.$el.find(".options")}),b},_toggleMenu:function(a){return a.stopPropagation(),a.preventDefault(),this.$el.hasClass("opened")?this.close():this.open()},_toggleMenuThenPropagate:function(a){return function(a){var b,c;if(null!=(null!=(b=a.data)?b.close:void 0))return null!=(c=a.data)?c.close():void 0}}(),open:function(){return this.$el.find(".tooltiptext").hide(),f.close(),this.$el.addClass("opened"),b.delay(function(a){return function(){return a._resize()}}(this),50)},close:function(){return this.$el.find(".tooltiptext").show(),this.$el.removeClass("opened")},prepareItemSelection:function(){return this.scrolling=!1,!0},scroll:function(){return this.scrolling=!0,!0},selectItem:function(b){var c,d;if(b.stopPropagation(),b.preventDefault(),d=a(b.target),d.hasClass("label")&&(d=d.parent("LI")),"SPAN"===d.prop("tagName")&&(d=d.parents("LI")),d.hasClass("selectable")&&this.$el.hasClass("opened")&&!this.scrolling)return c=this.options.items[d.attr("data-ref")],null!=c.href?(this.close(),c.target?window.open(c.href,c.target):window.location=c.href):(null!=c.action&&c.action(c),this.trigger("menu-selection",c),this.close())},getSelectedItem:function(){return this.selectedData}})},b=function(a,b,c,d,e){return c.View.extend({tagName:"div",className:"drop-down",template:d.compile('<div class="selector"> <span class="label">{{{selectedDataLabel}}}</span> <a onfocus="this.blur();"></a> <input type="hidden" name="{{options.name}}" {{#if selectedDataValue}}value="{{selectedDataValue}}"{{/if}}> </div> <div class="cont"> <ul class="options"> {{#each options.data}} {{#if hasValue}} <li class="selectable {{#if selected}}selected{{/if}}" data-ref="{{reference}}" data-value="{{value}}"><div class="label">{{{label}}}</div></li> {{/if}} {{/each}} </ul></div>'),events:function(){return e.isIpad()?{"touchend .selector":"_toggleMenu","touchend .options .selectable":"selectItem","touchmove .options .selectable":"scroll","touchstart .options .selectable":"prepareItemSelection"}:{"click .selector":"_toggleMenu","click .options .selectable":"selectItem"}}(),initialize:function(c){var d,g,h,i,j,k;for(this.options=this.options||c,f.addItem(this),g=0,j=this.options.data,h=0,i=j.length;h<i;h++)k=j[h],k.reference=g++,k.hasValue=null!=k.value,k.selected&&(null!=this.selectedData?k.selected=!1:this.selectedData=k);return null==this.selectedData&&(this.selectedData=this.options.data[0]),d=a(window),d.on("resize",b.debounce(function(a){return function(){return a._resize()}}(this),100)),e.isIpad()?d.on("touchend",this,this._toggleMenuThenPropagate):d.on("click",this,this._toggleMenuThenPropagate)},remove:function(){return a(window).off("resize",this._resize).off("click touchend",this._toggleMenuThenPropagate),f.removeItem(this)},enableOptions:function(b,c){return this.$el.find(".cont li").removeAttr("title").removeClass("inactive").each(function(d,e){var f,g;return f=a(e),g=f.attr("data-value"),null==b?f:0===b.length?f:-1===b.indexOf(g)?(f.attr("title",c),f.addClass("inactive")):void 0})},enable:function(){return this.$el.removeClass("disabled")},disable:function(){return this.close(),this.$el.addClass("disabled")},_resize:function(){var b,c,d,e;if(this.$el.hasClass("opened"))return null==this.$cont&&(this.$cont=this.$el.find(".cont")),e=a(window).height()-(this.$cont.offset().top-a(document).scrollTop())-this.$cont.height()-20,c=this.$cont.find(".options").height(),e<0?(d=this.$cont.height()+e,this.$cont.height(d)):this.$cont.height()<this.$cont.css("max-height").replace("px","")&&(d=Math.min(c,this.$cont.height()+e),this.$cont.height(d)),"function"==typeof(b=this.$el.find(".cont")).scroller&&b.scroller("computeSize",{height:d||this.$cont.height(),scrollableAreaHeight:c}),d<=c?this.$el.find(".options").addClass("no-scroll"):this.$el.find(".options").removeClass("no-scroll")},render:function(){var a,b;return this.$cont=void 0,null!=this.options.class&&this.$el.addClass(this.options.class),b=this.$el.html(this.template({options:this.options,selectedDataLabel:this.selectedData.label,selectedDataValue:this.selectedData.value})),1===this.options.data.length&&(b.find(".selector").addClass("disable-selector"),b.find(".selector a").addClass("custom-hidden")),this.selectedData.label.length>this.options.maxCharacters&&b.find(".selector .label").html(g(this.selectedData.label,this.options.maxCharacters)).attr("title",this.selectedData.label),a=this.$el.find(".cont"),"function"==typeof a.scrollerInit&&a.scrollerInit({scrollId:"detail"+this.options.name,horizontalPane:!1,scrollableArea:this.$el.find(".options")}),null==a.scrollerInit&&a.css("overflow-y","auto"),b},_toggleMenu:function(a){if(a.stopPropagation(),a.preventDefault(),!this.$el.hasClass("disabled"))return this.$el.hasClass("opened")?this.close():this.open()},_toggleMenuThenPropagate:function(a){return function(a){var b,c;if(null!=(null!=(b=a.data)?b.close:void 0))return null!=(c=a.data)?c.close():void 0}}(),open:function(){return f.close(this),this.$el.addClass("opened"),b.delay(function(a){return function(){return a._resize()}}(this),50)},close:function(){return this.$el.removeClass("opened")},selectValue:function(a){var b;return b=this.$el.find('.options li[data-value="'+a+'"]'),this._performItemSelection(b,a)},_performItemSelection:function(a,b){var c,d;return this.$el.find(".selectable").removeClass("selected"),a.addClass("selected"),this.selectedData=this.options.data[a.attr("data-ref")],d=this.$el.find(".selector"),d.find("input").attr("value",b),c=a.find(".label").html(),c&&(c.length>this.options.maxCharacters?d.find(".label").html(g(c,this.options.maxCharacters)).attr("title",c):d.find(".label").html(c)),this.trigger("selection",b),this.close()},prepareItemSelection:function(){return this.scrolling=!1,!0},scroll:function(){return this.scrolling=!0,!0},selectItem:function(b){var c,d;if(b.stopPropagation(),b.preventDefault(),c=a(b.target),"LI"!==c.nodeName&&(c=c.closest("LI")),!c.hasClass("inactive")&&c.hasClass("selectable")&&this.$el.hasClass("opened")&&!this.scrolling)return d=c.attr("data-value"),this._performItemSelection(c,d)},getSelectedItem:function(){return this.selectedData}})},c=function(a,b,c,d,f){return c.View.extend({tagName:"div",className:"table",template:d.compile('<table class="table"><thead> <tr> {{#if rowSelector}} <th class="center row-selector" title="Select all currently displayed"> <input type="checkbox" id="toggle-header" /> <label for="toggle-header"></label> </th> {{/if}} {{#each columns}} <th class="{{setAlignment @index}}{{setLength @index}}" {{#if title}}title="{{title}}"{{/if}}> {{#if headerMin}}<span class="min{{#if order}} {{order}}{{/if}} {{#if selector}}selector{{#if selector.active}} active{{/if}}{{else}}sort{{/if}}" data-label="{{{processSpecialCharacters headerMin}}}" data-column="{{@index}}">{{{processSpecialCharacters headerMin}}}</span>{{/if}} <span class="{{#if order}}{{order}} {{/if}}{{#if headerMin}}max{{/if}} {{#if selector}}selector{{#if selector.active}} active{{/if}}{{else}}sort{{/if}}" data-label="{{#if labelIcon}}<label>{{processSpecialCharacters labelIcon}} </label>{{/if}}{{{header}}}" data-column="{{@index}}">{{#if labelIcon}}<label>&{{labelIcon}} </label>{{/if}}{{{header}}}</span> </th> {{/each}} </tr> </thead><thead class="invisible-sticky-scroll"> <tr> {{#if rowSelector}} <th class="center row-selector" title="Select all currently displayed"> <input type="checkbox" id="toggle-header" /> <label for="toggle-header"></label> </th> {{/if}} {{#each columns}} <th class="{{setAlignment @index}}{{setLength @index}}" {{#if title}}title="{{title}}"{{/if}}> {{#if headerMin}}<span class="min{{#if order}} {{order}}{{/if}} {{#if selector}}selector{{#if selector.active}} active{{/if}}{{else}}sort{{/if}}" data-label="{{{processSpecialCharacters headerMin}}}" data-column="{{@index}}">{{{processSpecialCharacters headerMin}}}</span>{{/if}} <span class="{{#if order}}{{order}} {{/if}}{{#if headerMin}}max{{/if}} {{#if selector}}selector{{#if selector.active}} active{{/if}}{{else}}sort{{/if}}" data-label="{{#if labelIcon}}<label>{{processSpecialCharacters labelIcon}} </label>{{/if}}{{{header}}}" data-column="{{@index}}">{{#if labelIcon}}<label>&{{labelIcon}} </label>{{/if}}{{{header}}}</span> </th> {{/each}} </tr> </thead><tbody> {{#if groups}} {{#each groups}} {{setGroupKey @key}} <tr> <td colspan="1" class="group {{#if closed}}closed{{else}}opened{{/if}}" group-index="{{@key}}">{{@key}}</td> {{#each aggregates}} {{#showAggregate @index}} <td class="aggregate {{setAlignment @index}}">{{{aggregateColumn @index this}}}</td> {{else}} <td class="aggregate"></td> {{/showAggregate}} {{/each}} </tr> {{#each rows}} {{setRowIndex @index}} <tr class="in-group {{#if ../closed}}closed{{else}}opened{{/if}} {{#if ../click}}clickable  {{setSelected this}}{{/if}}" group-index="{{@../key}}" data-index="{{@index}}" {{#if id}}data-id="{{id}}"{{/if}}> {{#each columns}} <td class="{{setAlignment @index}}" {{#if id}}data-id="{{id}}"{{/if}}> <span>{{{formatRow this @index}}}</span></td> {{/each}} </tr> {{/each}} {{/each}} {{else}} {{#each rows}} {{setRowIndex @index}} <tr {{#if id}}data-id="{{id}}"{{/if}} data-index="{{@index}}" class="{{#if className}}{{className}}{{/if}}{{#if ../click}} clickable {{setSelected this}}{{/if}}" {{#each data}} data-{{label}}="{{value}}" {{/each}} > {{#if ../rowSelector}} <td class="center row-selector"> <input type="checkbox" id="toggle-{{@index}}" {{#if rowSelected}}checked{{/if}}/> <label for="toggle-{{@index}}"></label> </td> {{/if}} {{#each columns}} <td class="{{setAlignment @index}}" {{#if id}}data-id="{{id}}"{{/if}}>{{{formatRow this @index }}}</td> {{/each}} </tr> {{/each}} {{/if}} </tbody></table>'),events:{"click th span.sort":"sortColumn","click tr th.row-selector label":"toggleAllRowInputSelectors","click tr td.row-selector label":"toggleRowInputSelector","click tr.clickable td:not(.row-selector)":"actionOnRow","click td.group":"openOrCloseGroup"},initialize:function(a){var c,d,e,f,g,h,i,j,k;for(this.options=b.extend({},this.options,a),h=this.options.rows.models,d=0,f=h.length;d<f;d++)k=h[d],k.set("_bootstrapTableId",k.cid);for(this.selectedGroupBy=a.groupBy,i=this.options.columns,j=[],e=0,g=i.length;e<g;e++)c=i[e],j.push(null!=c.aggregate?c.aggregate:c.aggregate="sum");return j},toggleAllRowInputSelectors:function(c){var d,e,f,g,h,i;if(0===this.options.rows.length)return this.trigger("update:row-selector",{hasChecked:!1}),!1;for(d=a(c.target).siblings("input"),e=d.is(":checked"),e?this.$el.find('.row-selector input[type="checkbox"]').prop("checked",!1):this.$el.find('.row-selector input[type="checkbox"]').prop("checked",!0),this.$el.find('.row-selector.hide-row input[type="checkbox"]').prop("checked",!1),i=this.options.rows.models,f=0,g=i.length;f<g;f++)h=i[f],h.set("rowSelected",!e);return b.each(this.$el.find(".hide-row"),function(a){this.options.rows.findWhere({id:a.parentElement.dataset.id}).set("rowSelected",!1)},this),this.trigger("update:row-selector",{hasChecked:!e}),!1},toggleRowInputSelector:function(b){var c,d,e,f,g,h,i,j,k,l,m;for(e=a(b.target).siblings("input"),c=this.$el.find('th.row-selector input[type="checkbox"]'),c.is(":checked")&&e.is(":checked")&&c.prop("checked",!1),d=a(e.parents("tr")[0]),h=d.attr("data-index"),k=this.options.rows.at(h),f=(null!=k?k.get("rowSelected"):void 0)||!1,k.set("rowSelected",!f),k&&!f&&(m=k),e.prop("checked",!f),g=!1,l=this.options.rows.models,i=0,j=l.length;i<j;i++)if(k=l[i],k.get("rowSelected")){g=!0;break}return this.trigger("update:row-selector",{hasChecked:g,row:m,isShift:b.shiftKey}),!1},getSelectedRows:function(){return this.options.rows.where({rowSelected:!0})},remove:function(){},groupBy:function(a){if(a!==this.selectedGroupBy)return["none",-1,null,void 0].indexOf(a)>-1?this.selectedGroupBy=null:this.selectedGroupBy=a,this.render()},render:function(c){var d,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U;if(null!=this.selectedGroupBy){for(null!=this.groups&&(C=this.groups),this.groups={"no group":{rows:[],aggregate:0,aggregates:[]}},G=this.options.rows.toJSON(),r=0,u=G.length;r<u;r++)if(R=G[r],null!=(S=null!=(H=R.groups)?H[this.selectedGroupBy]:void 0)&&0!==S.length)for(t=0,v=S.length;t<v;t++){for(l=S[t],null==this.groups[l]&&(this.groups[l]={rows:[],aggregate:0,aggregates:[]}),this.groups[l].rows.push(R),p=z=0,K=this.options.columns.length-1;0<=K?z<=K:z>=K;p=0<=K?++z:--z)null==this.groups[l].aggregates[p]&&(this.groups[l].aggregates[p]=0),isNaN(R.columns[p])&&"N/A"!==R.columns[p]||((null!=(L=R.groups.appMarqCriterion)?L.appMarqcolumnNumber:void 0)===p&&R.groups.appMarqCriterion?R.groups.appMarqCriterion.filter?this.groups[l].aggregates[p]="N/A":this.groups[l].aggregates[p]=Number(R.groups.appMarqCriterion.average):this.groups[l].aggregates[p]+=R.columns[p]);this.groups[l].aggregate+=R.columns[R.columns.length-1]}else{for(this.groups["no group"].rows.push(R),p=s=0,J=this.options.columns.length-1;0<=J?s<=J:s>=J;p=0<=J?++s:--s)null==this.groups["no group"].aggregates[p]&&(this.groups["no group"].aggregates[p]=0),isNaN(R.columns[p])||(this.groups["no group"].aggregates[p]+=R.columns[p]);this.groups["no group"].aggregate+=R.columns[R.columns.length-1]}for(l in this.groups)if(0!==this.groups[l].rows.length){for(R=this.groups[l].rows[0],p=A=0,M=this.options.columns.length-1;0<=M?A<=M:A>=M;p=0<=M?++A:--A)if(!isNaN(R.columns[p])||(null!=(N=R.groups.appMarqCriterion)?N.gapColumnNumber:void 0)===p)if("average"!==this.options.columns[p].aggregate)if("industry"!==this.options.columns[p].aggregate||p!==R.groups.appMarqCriterion.gapColumnNumber)b.isFunction(this.options.columns[p].aggregate)?this.groups[l].aggregates[p]=this.options.columns[p].aggregate(l,R.groups):null!=R.groups[this.options.columns[p].aggregate]&&(this.groups[l].aggregates[p]=R.groups[this.options.columns[p].aggregate],null!=R.groups[this.options.columns[p].aggregate][l]&&(this.groups[l].aggregates[p]=R.groups[this.options.columns[p].aggregate][l]));else{if(R.groups.appMarqCriterion.filter){this.groups[l].aggregates[p]="N/A";continue}this.groups[l].aggregates[p]=(Math.floor(100*this.groups[l].aggregates[R.groups.appMarqCriterion.complianceColumnNumber])-Math.round(this.groups[l].aggregates[R.groups.appMarqCriterion.appMarqcolumnNumber]))/100}else this.groups[l].aggregates[p]=this.groups[l].aggregates[p]/this.groups[l].rows.length;0===this.groups[l].aggregates[0]&&(this.groups[l].aggregates[0]=l),null!=C&&(this.groups[l].closed=null!=(O=C[l])?O.closed:void 0)}else delete this.groups[l];if(null!=(null!=c?c.sort:void 0)){j=c.sort.direction,h=c.sort.column,m=[];for(l in this.groups)m.push({key:l,group:this.groups[l]});for(m.sort(function(a,b){var c,d;return c=a.group.aggregates[h],d=b.group.aggregates[h],isNaN(c)||isNaN(d)?j?c<d?1:-1:c<d?-1:1:j?d-c:c-d}),this.groups={},B=0,w=m.length;B<w;B++)l=m[B],this.groups[l.key]=l.group}else for(p=D=0,P=this.options.columns.length-1;0<=P?D<=P:D>=P;p=0<=P?++D:--D)if(this.options.columns[p].header===this.options.sortByDefault){j=!1,h=p,m=[];for(l in this.groups)m.push({key:l,group:this.groups[l]});for(m.sort(function(a,b){var c,d;return c=a.group.aggregates[h],d=b.group.aggregates[h],isNaN(R.columns[h])?j?c<d?1:-1:c<d?-1:1:j?c-d:d-c}),this.groups={},E=0,x=m.length;E<x;E++)l=m[E],this.groups[l.key]=l.group;break}}else this.groups=null;for(U=this,n=this.$el.html(this.template({click:null!=this.options.click,columns:this.options.columns,groups:this.groups,lastColumnAggregate:this.options.lastColumnAggregate,rows:this.options.rows.toJSON(),rowSelector:this.options.rowSelector},{helpers:{processSpecialCharacters:function(a){return null==a?"":a.replace(/#/g,"&#")},length:function(a,b){if(null!=(null!=a?a.length:void 0))return a.length+b},setGroupKey:function(a){U.groupKey=a},setRowIndex:function(a){U.rowIndex=a},setSelected:function(a){return a.selected?"selected":""},aggregateColumn:function(a){return function(c,d){var e,g,h;if(e=a.options.columns[c],!b.isUndefined(e)&&null!==e){if(g="","sum"!==(h=e.aggregate)&&"average"!==h||(g=e.aggregate+": "),null==e.format)return g+d;if(b.isFunction(e.format))try{return g+e.format.call(a,d)}catch(i){return i,g+f(d).format("0,000.0")}return g+f(d).format(e.format)}}}(this),showAggregate:function(a,b){var c;if(0!==a)return c=U.options.columns[a],"none"!==c.aggregate?b.fn(this):b.inverse(this)},formatRow:function(a){return function(c,d){var e,g;if(e=a.options.columns[d],!b.isUndefined(e)&&null!==e)return null==e.format?c:b.isFunction(e.format)?(g=null!=a.groups?a.groups[U.groupKey].rows[U.rowIndex]:a.options.rows.at(U.rowIndex),null!=g.toJSON&&(g=g.toJSON()),e.format.call(a,c,d,U.rowIndex,g)):f(c).format(e.format)}}(this),setAlignment:function(a){return function(c){var d;if(d=a.options.columns[c],!b.isUndefined(d)&&null!==d)return null!=d.align?d.align:"left"}}(this),setLength:function(a){return function(c){var d;if(d=a.options.columns[c],!b.isUndefined(d)&&null!==d)return null!=d.length?" length-"+d.length:""}}(this)}})),U=this,o=F=0,Q=this.options.columns.length-1;0<=Q?F<=Q:F>=Q;o=0<=Q?++F:--F)if(g=this.options.columns[o],null!=g.selector){for(d=n.find("span[data-column="+o+"]"),q=[],I=g.selector.data,k=function(a,b){return q.push({text:a.label,action:function(){return null!=a.value?(d.addClass("active"),b.selector.active=!0):(d.removeClass("active"),b.selector.active=!1),b.selector.onSelection(a.value)}})},T=0,y=I.length;T<y;T++)i=I[T],k(i,g);d.each(function(b,c){var d,f;return d=a(c),f=new e.Menu({text:d.attr("data-label"),items:q}),d.html(f.render()),f.on("selection",g.selector.onSelection)})}return this.$el.data("bootstrap-table",this),n},adjustStickyHeader:function(b){var c,d,e,f,g,h;return h=null!=(f=this.$el.position())?f.top:void 0,e=this.$el.find(".invisible-sticky-scroll"),g=null!=b?b.offset().top:0,h>=0?void e.hide():this.$el.height()+h<0?void e.hide():(e.css("top",g),e.show(),c=this.$el.find("thead"),d=c.find("th"),e.find("th").each(function(b,c){return a(c).width(a(d[b]).width())}),e.width(c.find("thead").width()))},openOrCloseGroup:function(b){var c,d,e,f,g,h;return d=a(b.target),e=d.attr("group-index"),d.hasClass("opened")?(d.removeClass("opened"),this.$el.find('.in-group[group-index="'+e+'"]').addClass("closed"),null!=(g=this.groups[e])&&(g.closed=!0)):(d.addClass("opened"),this.$el.find('.in-group[group-index="'+e+'"]').removeClass("closed"),null!=(h=this.groups[e])&&(h.closed=!1)),c=this.$el.find('.in-group[group-index="'+e+'"]:first'),f=function(a){return function(b){return c.off("webkitAnimationEnd oanimationend msAnimationEnd animationend transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",f),a.trigger("table:resized")}}(this),c.on("webkitAnimationEnd oanimationend msAnimationEnd animationend transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",f)},collapseAllGroup:function(){var b,c,d,e,f,g,h;if(d=this.$el.find(".group"),d.removeClass("opened"),this.$el.find(".in-group").addClass("closed"),null!=this.groups){for(h=[],e=0,f=d.length;e<f;e++)b=d[e],c=a(b).attr("group-index"),h.push(null!=(g=this.groups[c])?g.closed=!0:void 0);return h}},expandGroup:function(a){var b;return this.$el.find('.group[group-index="'+a+'"]').addClass("opened"),this.$el.find('.in-group[group-index="'+a+'"]').removeClass("closed"),null!=(b=this.groups[a])?b.closed=!1:void 0},actionOnRow:function(b){var c;return c=a(b.target).parents("tr"),this._applySelection(c)},_applySelection:function(a,b){var c,d,e,f;if(c=a.attr("group-index"),f=a.attr("data-index"),d=this.options.rows.at(f).attributes,null!=this.groups&&(d=this.groups[c].rows[f],e=this.options.rows.findWhere({_bootstrapTableId:d._bootstrapTableId})),!d.notSelectable&&(this.options.selectOnClick&&(this._unSelectAll(),a.addClass("selected"),d.selected=!0,null!=e&&e.set("selected",!0)),b||this.trigger("row:clicked",d),"function"==typeof this.options.click))return this.options.click(d)},_unSelectAll:function(){var a,b,c,d,e,f;for(this.$el.find("tr").removeClass("selected"),d=this.options.rows.models,b=0,c=d.length;b<c;b++)f=d[b],f.set("selected",!1);if(null!=this.groups){e=[];for(a in this.groups)e.push(function(){var b,c,d,e;for(d=this.groups[a],e=[],b=0,c=d.length;b<c;b++)f=d[b],e.push(f.selected=!1);return e}.call(this));return e}},selectRow:function(a,b){var c;return c=this.$el.find("tr[data-index="+a+"]"),0===c.length?this._unSelectAll():this._applySelection(c,b)},select:function(a,b,c){var d,e,f,g,h,i,j;if(null==b)return this._unSelectAll();for(e=0,h=this.options.rows.models,f=0,g=h.length;f<g;f++){if(j=h[f],(null!=(i=j.get("extra"))?i[a]:void 0)===b)return d=this.$el.find("tr[data-index="+e+"]"),this._applySelection(d,c);e++}},resetSort:function(){var a,b,c,d,e;for(d=this.options.columns,e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(a.order=null);return e},sortColumn:function(c){var d,e,f,g,h,i,j,k;return d=a(c.target).is("span")?a(c.target):a(c.target).parent(),h=d.hasClass("sort-up")||!d.hasClass("sort-down"),f=d.attr("data-column"),null==this.options.columns[f].selector&&"function"==typeof(e=this.options.columns[f]).preSort&&e.preSort(),k=function(a,b,c){return a.columns[f]<b.columns[f]?1:a.columns[f]>b.columns[f]?-1:0},null!=(null!=(j=this.options.columns[f])?j.sort:void 0)&&(k=this.options.columns[f].sort),this.options.rows.comparator=h?function(a,b){return k(a.toJSON(),b.toJSON(),h)}:function(a,b){return-k(a.toJSON(),b.toJSON(),h)},this.resetSort(),this.options.columns[f].order=h?"sort-down":"sort-up",this.options.rows.sort(),this.options.rows.comparator=null,g=b.map(b.filter(this.$el.find("table tbody tr"),function(b){if(a(b).find("td:first").hasClass("hide-row"))return b}),function(b){return a(b).attr("data-id")}),i=this.$el.find("thead .row-selector input").first().is(":checked"),this.render({sort:{direction:h,column:f}}),i&&this.$el.find('table thead tr th.row-selector input[type="checkbox"]').prop("checked",!0),this.options.rows,this.$el.find("table tbody tr td.center").last().addClass("violation-body-size"),this.$el.find("table thead tr:first th.center").last().addClass("violation-header-size"),b.each(this.$el.find("table tbody tr"),function(c){return function(c){if(b.contains(g,a(c).attr("data-id")))return a(c).find("td:first").addClass("hide-row")}}()),this.$el.find('.row-selector.hide-row input[type="checkbox"]').prop("checked",!1),this.$el.find(".hide-row").length>0&&b.each(this.$el.find(".hide-row"),function(a){this.options.rows.findWhere({id:a.parentElement.dataset.id}).set("rowSelected",!1)},this),this.$el.find(".row-selector.hide-row").on("click",function(){return!1}),this.$el.find("th.row-selector.disabled").on("click",function(){return!1}),this.trigger("sorted")},update:function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;if(null!=a.rows){for(a=b.extend({resetRowSelector:!1},a),w=[],x=[],r=this.options.rows.models,g=0,j=r.length;g<j;g++)v=r[g],e=v.get("id"),null==(z=a.rows.findWhere({id:e}))&&x.push(v);for(h=0,k=x.length;h<k;h++)v=x[h],this.options.rows.remove(v);if(a.resetRowSelector)for(s=a.rows.models,i=0,l=s.length;i<l;i++)v=s[i],e=v.get("id"),z=this.options.rows.findWhere({id:e}),null!=z?(f=this.options.rows.indexOf(z),this.options.rows.remove(z),this.options.rows.add(v,{at:f})):w.push(v);else{for(c=!1,t=a.rows.models,o=0,m=t.length;o<m;o++)if(v=t[o],e=v.get("id"),null!=(z=this.options.rows.findWhere({id:e}))){for(y=!0,z.get("rowSelected")&&(c=!0),d=p=0,u=v.get("columns").length-1;(0<=u?p<=u:p>=u)&&y;d=0<=u?++p:--p)y=v.get("columns")[d]===z.get("columns")[d];y||(f=this.options.rows.indexOf(z),this.options.rows.remove(z),this.options.rows.add(v,{at:f}))}else w.push(v);this.trigger("update:row-selector",{hasChecked:c})}for(q=0,n=w.length;q<n;q++)v=w[q],this.options.rows.add(v);return this.resetSort(),this.render()}}})},d=function(a,b,c,d,e){var f,g,h;return f=c.Model.extend({url:function(){return null!=window.REST_URL?window.REST_URL+this.get("href"):this.get("href")},defaults:{display:!0}}),g=c.Collection.extend({model:f,url:function(){var a;return a=null!=this.startRow?"?startRow="+this.startRow:"",a+=null!=this.nbRows?"&nbRows="+this.nbRows:"",null!=window.REST_URL?window.REST_URL+this.href+a:this.href+a},initialize:function(a){return this.href=null!=a?a.href:void 0,this.selected=null!=a?a.selected:void 0,this.startRow=null!=a?a.startRow:void 0,this.nbRows=null!=a?a.nbRows:void 0}}),h=c.View.extend({tagName:"ul",template:d.compile('{{#each nodes}} <li  {{#unless display}}class="hide"{{/unless}}><div data-level="{{../level}}" class="node"> <div class="node-container"> <span class="{{#isLeaf children}}node-leaf{{else}}node-icon node-button{{/isLeaf}}" data-href="{{children.href}}"></span> <span data-id="{{href}}" class="name">{{name}}</span> </div> </div><div class="children closed"></div> </li> {{/each}} {{#if hasMoreNodes}} <li><div data-level="{{level}}" class="node"> <div class="node-container"> <span class="node-icon node-loading"></span> <span class="node-loading-text">Loading next items</span> </div> </div> </li> {{/if}}'),events:{"click span.node-button":"openOrCloseNode","click span.name":"selectNode"},loadOnVisibleScroll:function(a){var b,c,d,e,f,h;if(b=this.$el.find("> li >>> span.node-loading-text"),null!=(d=null!=(e=b.offset())?e.top:void 0)&&(h=0<(f=d-a.containerOffset)&&f<a.containerHeight&&0===b.parents(".children.closed").length,!this.loading))return h?(this.loading=!0,c=new g({href:this.nodes.href,startRow:this.nodes.startRow+this.nodes.nbRows-1,nbRows:this.nodes.nbRows}),c.fetch().done(function(a){return function(){var b;return null!=a.initiallySelected&&null!=(b=c.findWhere({href:a.initiallySelected}))&&b.set("display",!1),a.renderMoreContent(c),a.nodes.add(c.toJSON()),a.nodes.startRow=c.startRow,a.loading=!1,a.tree.loadingItem()}}(this))):void 0},selectNode:function(b){var c;return c=a(b.target),this._selectNode(c)},_selectNode:function(b){var c;if(c=a(b.parents("div.node").get(0)),this.level===parseInt(c.attr("data-level")))return this._updateSelection(b)},_updateSelection:function(b){var c,d,e;if(c=a(b.parents("div.node").get(0)),this.tree.trigger("node:unselected"),c.addClass("selected"),d=b.attr("data-id"),null!=(e=this.nodes.findWhere({href:d})))return this.tree.trigger("node:clicked",e.toJSON())},openOrCloseNode:function(b){return this._openOrCloseNode({$target:a(b.target)})},_openOrCloseNode:function(b,c){var d,e,f,i,j,k,l,m,n;if(i=b.$target,f=a(i.parents("div.node").get(0)),this.level===parseInt(f.attr("data-level")))return e=a(i.parents("li").get(0)),d=a(e.find("div.children").get(0)),i.hasClass("open")?b.keepOpen?"function"==typeof c?c():void 0:(d.addClass("closed"),i.removeClass("open"),"function"==typeof(j=this.tree.options).animate&&j.animate(d,"close"),void(e.find("div.node.selected").length&&this._updateSelection(f.find("span.name")))):(m=["","<ul></ul>"],m.indexOf(d.html())<0?(d.removeClass("closed"),i.addClass("open"),void("function"==typeof(k=this.tree.options).animate&&k.animate(d,"open"))):(l=new g({href:i.attr("data-href"),startRow:this.startRow,nbRows:this.nbRows}),this.children=l,n=this,l.fetch({success:function(){var a,e;return l.view=new h({tree:n.tree,level:n.level+1,nodes:l,startRow:n.startRow,nbRows:n.nbRows}),b.parent?null==l.findWhere({href:b.parent.get("href")})&&(l.view.initiallySelected=b.parent.get("href"),l.unshift(b.parent),l.pop(),l.startRow-=1):null!=b.parents&&(e=b.parents.at(b.parents.length-1),null==l.findWhere({href:e.get("href")})&&(l.view.initiallySelected=e.get("href"),l.unshift(e),l.pop(),l.startRow-=1)),d.html(l.view.render()),d.removeClass("closed"),0!==l.length&&i.addClass("open"),"function"==typeof(a=n.tree.options).animate&&a.animate(d,"open"),n.tree.loadingItem(),"function"==typeof c?c(l.view):void 0}})))},_scrollToSelected:function(b){var c,d;return d=Math.max(0,(null!=(c=b.position())?c.top:void 0)-16),a(b.parents("div.tree-container")[0]).animate({scrollTop:d},"400","swing")},initialize:function(a){return this.tree=a.tree,this.nodes=a.nodes,this.level=a.level||0,this.startRow=a.startRow,this.nbRows=a.nbRows,this.tree.on("scroll:container",this.loadOnVisibleScroll,this)},openPaths:function(a){var b,c,d,e,f,g;if(!(a<=0)){for(f=this.nodes.models,g=[],c=0,d=f.length;c<d;c++)e=f[c],b=e.get("children").href,g.push(this._openOrCloseNode({$target:this.$el.find('span.node-button[data-href="'+b+'"]'),keepOpen:!0},function(b){return function(b){if(null!=b)return b.openPaths(a-1)}}()));return g}},loadPath:function(a,b,c){var d,e,f,g;return a.length-1<=b?(e=a.selected,d=this.$el.find('span.name[data-id="'+e+'"]'),this._selectNode(d),this._scrollToSelected(d),"function"==typeof c?c():void 0):null!=(f=null!=(g=a.at(b).get("children"))?g.href:void 0)?this._openOrCloseNode({$target:this.$el.find('span.node-button[data-href="'+f+'"]'),parent:a.at(b+1),parents:a,depth:b+1},function(d){return function(d){return d.loadPath(a,b+1,c)}}()):void 0},render:function(){var a;return a=this.nodes.nbRows===this.nodes.length,a&&this.nodes.remove(this.nodes.at(this.nodes.length-1)),this.$el.html(this.template({level:this.level,hasMoreNodes:a,nodes:this.nodes.toJSON()},{helpers:{isLeaf:function(a,b){return null==a?b.fn(this):b.inverse(this)}}})),this.$el},renderMoreContent:function(a){var b;return b=a.nbRows===a.length,b&&a.remove(a.at(a.length-1)),this.$el.find("li").last().replaceWith(this.template({level:this.level,hasMoreNodes:b,nodes:a.toJSON()},{helpers:{isLeaf:function(a,b){return null==a?b.fn(this):b.inverse(this)}}})),this.$el}}),c.View.extend({tagName:"div",className:"tree",template:d.compile('<div class="tree-header">{{title}}</div><div class="tree-container"></div>'),loadingItem:function(){var a,b,c;return b=null!=(c=this.$el.find(".tree-container").offset())?c.top:void 0,
a=this.$el.find(".tree-container").outerHeight(),this.trigger("scroll:container",{containerOffset:b,containerHeight:a})},initialize:function(a){var c,d,e,f;for(this.options=b.extend({},this.options,a),null!=this.options.nbRows&&(this.options.nbRows=parseInt(this.options.nbRows)+1),this.nodes=[],f=this.options.roots,c=0,d=f.length;c<d;c++)e=f[c],this.nodes.push(new g({href:e}));return this.on("node:unselected",this.unSelectNodes,this),this},unSelectNodes:function(){return this.$el.find("div.node.selected").removeClass("selected")},_expand:function(){var a,b,c,d,e;if(this.options.expand){for(d=this.nodes,e=[],a=0,b=d.length;a<b;a++)c=d[a],e.push(c.view.openPaths(this.options.expand));return e}},render:function(){var b,c,d,e,i,j,k;for(this.$el.find(".tree-container").off("scroll"),this.$el.html(this.template({title:this.options.title})),this.$el.find(".tree-container").on("scroll",function(a){return function(){return a.loadingItem()}}(this)),e=null,i=this.nodes,b=0,c=i.length;b<c;b++)j=i[b],d=j.fetch(),e=null==e?d:a.when(e,d);return k=this,e.done(function(){var b,c,d,e,i;for(d=k.nodes,b=0,c=d.length;b<c;b++)j=d[b],j.view=new h({tree:k,nodes:j,nbRows:k.options.nbRows,startRow:k.options.startRow}),k.$el.find(".tree-container").append(j.view.render());if(null!=k.options.selectedNode)return e=new f({href:k.options.selectedNode}),i=new g({selected:k.options.selectedNode,href:k.options.selectedNode+"/ancestors"}),a.when(e.fetch({cache:!1}),i.fetch({cache:!1})).done(function(){var a,b,c,d,f,g;for(i.add(e),f=k.nodes,a=0,b=f.length;a<b;a++){if(d=f[a],c=d.href,0===i.length)return d.view.loadPath(i,1,function(){return k._expand()});if(g=i.at(0),c===g.get("href"))return d.view.loadPath(i,0,function(){return k._expand()})}})}),this.$el}})},g=function(a,b){return a.length>b?a.slice(0,b-1)+"...":a},f={items:[],addItem:function(a){if(null!=a.close)return this.items.push(a)},removeItem:function(a){var b;if((b=_.indexOf(this.items,a))>-1)return this.items.splice(b,1)},close:function(a){var b,c,d,e,f;for(e=this.items,f=[],c=0,d=e.length;c<d;c++)b=e[c],b!==a?f.push(null!=b?b.close():void 0):f.push(void 0);return f}},e=function(f,g,h,i,j){var k;return k={isIpad:function(){return null!==navigator.userAgent.match(/iPad/i)}},e={},e.Table=c(f,g,h,i,j,k),e.TreeExplorer=d(f,g,h,i,j,k),e.Menu=a(f,g,h,i,k),e.Selector=b(f,g,h,i,k),e},null!=("undefined"!=typeof define&&null!==define?define.amd:void 0)?define(["jquery","underscore","backbone","handlebars","numberFormater"],function(a,b,c,d,f){return e(a,b,c,d,f)}):"undefined"!=typeof window&&null!==window&&(window.bootstrap=e($,_,Backbone,Handlebars,numeral))}).call(this);