{"version":3,"file":"backbone-marionette-handlebars.min.js","sources":["backbone-marionette-handlebars.js"],"names":["Backbone","Marionette","Handlebars","path","extension","TemplateCache","prototype","load","this","compiledTemplate","templates","templateId","template","loadTemplate","compileTemplate","templateUrl","$","html","e","length","ajax","url","success","data","async","rawTemplate","compile","Renderer","render","options","_","isObject","isFunction","isString","omit","content","error","Error","name","templateFunc","get"],"mappings":"CAAC,WAEAA,SAASC,WAAWC,YACnBC,KAAM,aACNC,UAAW,eAGZJ,SAASC,WAAWI,cAAcC,UAAUC,KAAO,WAClD,GAAIC,KAAKC,iBAER,MAAOD,MAAKC,gBAEb,IAAIP,WAAWQ,WAAaR,WAAWQ,UAAUF,KAAKG,YAErDH,KAAKC,iBAAmBP,WAAWQ,UAAUF,KAAKG,gBAGnD,CACC,GAAIC,GAAWJ,KAAKK,aAAaL,KAAKG,WACtCH,MAAKC,iBAAmBD,KAAKM,gBAAgBF,GAE9C,MAAOJ,MAAKC,kBAGbT,SAASC,WAAWI,cAAcC,UAAUO,aAAe,SAASF,GACnE,GAAIC,GAAUG,CACd,KACCH,EAAWZ,SAASgB,EAAEL,GAAYM,OAEnC,MAAOC,IAWP,GARKN,GAAgC,IAApBA,EAASO,SACzBJ,EAAcf,SAASC,WAAWC,WAAWC,KAAOQ,EAAaX,SAASC,WAAWC,WAAWE,UAChGJ,SAASgB,EAAEI,MACVC,IAAKN,EACLO,QAAS,SAASC,GAAQX,EAAWW,GACrCC,OAAO,MAGJZ,GAAgC,IAApBA,EAASO,OACzB,KAAM,+CAAiDJ,EAAc,GAEtE,OAAOH,IAGRZ,SAASC,WAAWI,cAAcC,UAAUQ,gBAAkB,SAASW,GAEtE,MAAOvB,YAAWwB,QAAQD,IAG3BzB,SAASC,WAAW0B,SAASC,OAAS,SAAUhB,EAAUW,GAEzD,GAAIM,EAOJ,KANIC,EAAEC,SAASnB,IAAckB,EAAEE,WAAWpB,IAAckB,EAAEG,SAASrB,KAElEiB,EAAUC,EAAEI,KAAKtB,EAAU,WAC3BA,EAAWA,EAASuB,UAGhBvB,EAAU,CACd,GAAIwB,GAAQ,GAAIC,OAAM,kEAEtB,MADAD,GAAME,KAAO,wBACPF,EAGP,GAAIG,EAUJ,QAPCA,EAFuB,kBAAb3B,GAEKA,EAIAZ,SAASC,WAAWI,cAAcmC,IAAI5B,IAGlCW,EAAMM","sourcesContent":["(function() {\r\n \r\n\tBackbone.Marionette.Handlebars = {\r\n\t\tpath: 'templates/',\r\n\t\textension: '.handlebars'\r\n\t};\r\n \r\n\tBackbone.Marionette.TemplateCache.prototype.load = function() {\r\n\t\tif (this.compiledTemplate) \r\n\t\t{\r\n\t\t\treturn this.compiledTemplate;\r\n\t\t}\r\n\t\tif (Handlebars.templates && Handlebars.templates[this.templateId]) \r\n\t\t{\r\n\t\t\tthis.compiledTemplate = Handlebars.templates[this.templateId];\r\n\t\t}\r\n\t\telse \r\n\t\t{\r\n\t\t\tvar template = this.loadTemplate(this.templateId);\r\n\t\t\tthis.compiledTemplate = this.compileTemplate(template);\r\n\t\t}\r\n\t\treturn this.compiledTemplate;\r\n\t};\r\n \r\n\tBackbone.Marionette.TemplateCache.prototype.loadTemplate = function(templateId) {\r\n\t\tvar template, templateUrl;\r\n\t\ttry {\r\n\t\t\ttemplate = Backbone.$(templateId).html();\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\t\r\n\t\t}\r\n\t\tif (!template || template.length === 0) {\r\n\t\t\ttemplateUrl = Backbone.Marionette.Handlebars.path + templateId + Backbone.Marionette.Handlebars.extension;\r\n\t\t\tBackbone.$.ajax({\r\n\t\t\t\turl: templateUrl,\r\n\t\t\t\tsuccess: function(data) { template = data; },\r\n\t\t\t\tasync: false\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (!template || template.length === 0){\r\n\t\t\tthrow \"NoTemplateError - Could not find template: '\" + templateUrl + \"'\";\r\n\t\t}\r\n\t\treturn template;\r\n\t};\r\n \r\n\tBackbone.Marionette.TemplateCache.prototype.compileTemplate = function(rawTemplate) \r\n\t{\r\n\t\treturn Handlebars.compile(rawTemplate);\r\n\t};\r\n\t\r\n\tBackbone.Marionette.Renderer.render = function (template, data) {\r\n\r\n\t\tvar options;\r\n\t\tif (_.isObject(template) && !_.isFunction(template) && !_.isString(template)) \r\n\t\t{\r\n\t\t\toptions = _.omit(template, 'content');\r\n\t\t\ttemplate = template.content;\r\n\t\t}\r\n\t\t\r\n\t\tif (!template) {\r\n\t\t\tvar error = new Error(\"Cannot render the template since it's false, null or undefined.\");\r\n\t\t\terror.name = \"TemplateNotFoundError\";\r\n\t\t\tthrow error;\r\n\t\t}\r\n\t\t\r\n\t\tvar templateFunc;\r\n\t\tif (typeof template === \"function\")\r\n\t\t{\r\n\t\t\ttemplateFunc = template;\r\n\t\t} \r\n\t\telse \r\n\t\t{\r\n\t\t\ttemplateFunc = Backbone.Marionette.TemplateCache.get(template);\r\n\t\t}\r\n\r\n\t\treturn templateFunc(data, options);\r\n\t\t\r\n\t};\r\n\t\r\n \r\n}());"]}